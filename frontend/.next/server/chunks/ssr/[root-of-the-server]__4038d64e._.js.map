{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 119, "column": 0}, "map": {"version":3,"sources":["file:///D:/perfi/frontend/app/components/table.tsx"],"sourcesContent":["'use client';\r\nimport React, { useState } from \"react\";\r\nimport ExcelJS from \"exceljs\";\r\nimport { saveAs } from \"file-saver\";\r\nimport jsPDF from \"jspdf\";\r\nimport autoTable from \"jspdf-autotable\";\r\n\r\ntype TableProps = {\r\n  columns: { key: string; label: string }[];\r\n  data: Record<string, React.ReactNode>[];\r\n  selectable?: boolean;\r\n  pageSize?: number;\r\n};\r\n\r\nconst PAGE_SIZE_OPTIONS = [10, 20, 50, 100];\r\n\r\nexport default function GenericTable({ columns, data, pageSize = 10 }: TableProps) {\r\n  const [page, setPage] = useState(1);\r\n  const [rowsPerPage, setRowsPerPage] = useState(pageSize);\r\n  const [showExportMenu, setShowExportMenu] = useState(false);\r\n\r\n  const totalPages = Math.ceil(data.length / rowsPerPage);\r\n  const paginatedData = data.slice((page - 1) * rowsPerPage, page * rowsPerPage);\r\n\r\n  // Exportar a Excel\r\n  const handleExportExcel = async () => {\r\n    const workbook = new ExcelJS.Workbook();\r\n    const worksheet = workbook.addWorksheet(\"Tabla\");\r\n\r\n    worksheet.addRow(columns.map(col => col.label));\r\n    data.forEach(row => {\r\n      worksheet.addRow(columns.map(col => row[col.key]));\r\n    });\r\n\r\n    const buffer = await workbook.xlsx.writeBuffer();\r\n    saveAs(new Blob([buffer]), \"tabla_amortizacion.xlsx\");\r\n  };\r\n\r\n  // Exportar a PDF\r\n  const handleExportPDF = () => {\r\n    const doc = new jsPDF();\r\n    autoTable(doc, {\r\n      head: [columns.map(col => col.label)],\r\n      body: data.map(row => columns.map(col => {\r\n        const value = row[col.key];\r\n        if (value === undefined || value === null) return '';\r\n        if (typeof value === 'string' || typeof value === 'number') return value;\r\n        if (typeof value === 'object' && 'toString' in value) return value.toString();\r\n        return '';\r\n      })),\r\n      styles: { font: \"helvetica\", fontSize: 10, halign: 'center' },\r\n      headStyles: { fillColor: [46, 204, 113], halign: 'center' },\r\n    });\r\n    doc.save(\"tabla_amortizacion.pdf\");\r\n  };\r\n\r\n  // Helper for pagination numbers (responsive)\r\n  const getPages = () => {\r\n    const isSmallScreen = typeof window !== \"undefined\" && window.innerWidth < 855;\r\n    const maxButtons = isSmallScreen ? 3 : 5;\r\n    const pages = [];\r\n    if (totalPages <= maxButtons) {\r\n      for (let i = 1; i <= totalPages; i++) pages.push(i);\r\n    } else {\r\n      if (page <= Math.ceil(maxButtons / 2)) {\r\n        for (let i = 1; i <= maxButtons; i++) pages.push(i);\r\n      } else if (page >= totalPages - Math.floor(maxButtons / 2)) {\r\n        for (let i = totalPages - maxButtons + 1; i <= totalPages; i++) pages.push(i);\r\n      } else {\r\n        for (let i = page - Math.floor(maxButtons / 2); i <= page + Math.floor(maxButtons / 2); i++) pages.push(i);\r\n      }\r\n    }\r\n    return pages;\r\n  };\r\n\r\n  // Reset page if rowsPerPage changes\r\n  React.useEffect(() => {\r\n    setPage(1);\r\n  }, [rowsPerPage]);\r\n\r\n  // En el componente:\r\n  React.useEffect(() => {\r\n    const handleResize = () => setPage(page => Math.min(page, Math.ceil(data.length / rowsPerPage)));\r\n    window.addEventListener('resize', handleResize);\r\n    return () => window.removeEventListener('resize', handleResize);\r\n  }, [data.length, rowsPerPage]);\r\n\r\n  return (\r\n    <>\r\n      <div className=\"shadow-md sm:rounded-lg\">\r\n        <div className=\"relative overflow-x-auto\">\r\n          <table className=\"min-w-full w-full text-sm text-left bg-background-light dark:bg-surface-dark border border-border-light dark:border-border-dark\">\r\n            <thead className=\"text-xs uppercase bg-surface-light dark:bg-background-dark text-text-light dark:text-muted-dark border-b border-border-light dark:border-border-dark\">\r\n              <tr>\r\n                {columns.map((col) => (\r\n                  <th key={col.key} scope=\"col\" className=\"px-4 py-3 font-semibold text-center\">\r\n                    {col.label}\r\n                  </th>\r\n                ))}\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {paginatedData.map((row, i) => {\r\n                const globalIndex = (page - 1) * rowsPerPage + i;\r\n                return (\r\n                  <tr\r\n                    key={i}\r\n                    className={\r\n                      \"text-text-light dark:text-text-dark border-b border-border-light dark:border-border-dark hover:bg-background-light dark:hover:bg-background-dark transition-colors \" +\r\n                      (globalIndex === data.length - 1\r\n                        ? \"bg-background-light dark:bg-surface-dark text-text-light\"\r\n                        : globalIndex % 12 === 0\r\n                          ? \"bg-primary !text-muted-dark\"\r\n                          : (i % 2 === 1\r\n                              ? \"text-muted-light dark:text-text-muted-dark bg-surface-light dark:bg-background-dark\"\r\n                              : \"text-muted-light dark:text-text-muted-dark\"))\r\n                    }\r\n                  >\r\n                    {columns.map((col, j) =>\r\n                      j === 0 ? (\r\n                        <th\r\n                          key={col.key}\r\n                          scope=\"row\"\r\n                          className=\"px-1 py-2 font-medium whitespace-nowrap text-center\"\r\n                        >\r\n                          {row[col.key]}\r\n                        </th>\r\n                      ) : (\r\n                        <td key={col.key} className=\"px-1 py-2 text-center\">\r\n                          {row[col.key]}\r\n                        </td>\r\n                      )\r\n                    )}\r\n                  </tr>\r\n                );\r\n              })}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n        <nav\r\n          className=\"w-full flex flex-row flex-wrap items-stretch sm:items-center justify-between border-x border-b border-t-0 border-border-light dark:border-border-dark p-2 sm:p-4 gap-y-3 gap-x-2 bg-surface-light dark:bg-background-dark\"\r\n          aria-label=\"Table navigation\"\r\n        >\r\n          {/* Select Pages */}\r\n          <div className=\"flex flex-row flex-wrap items-start sm:items-center gap-1 sm:gap-4 whitespace-nowrap mb-1 sm:mb-0 min-w-0\">\r\n            <label className=\"ml-1 text-[10px] sm:text-xs text-muted-light dark:text-muted-dark flex items-center gap-1\">\r\n              Filas:\r\n              <select\r\n                className=\"ml-1 sm:w-20 min-w-[68px] max-w-[68px] rounded  sm:text-xs  py-0.5\"\r\n                value={rowsPerPage}\r\n                onChange={e => setRowsPerPage(Number(e.target.value))}\r\n              >\r\n                {PAGE_SIZE_OPTIONS.map(opt => (\r\n                  <option key={opt} value={opt}>{opt}</option>\r\n                ))}\r\n              </select>\r\n              <span className=\"text-[10px] sm:text-sm mr-2 font-normal text-muted-light dark:text-muted-dark\">\r\n              <span className=\"text-text-light dark:text-text-dark\">\r\n                {(page - 1) * rowsPerPage + 1}-{Math.min(page * rowsPerPage, data.length)}\r\n              </span>{\" \"}\r\n              de{\" \"}\r\n              <span className=\"text-text-light dark:text-text-dark\">\r\n                {data.length}\r\n              </span>\r\n            </span>\r\n            </label>\r\n            \r\n          </div>\r\n          {/* Pagination + export */}\r\n          <div className=\"flex flex-row flex-wrap items-start gap-1 sm:gap-4 min-w-0\">\r\n            <ul className=\"inline-flex -space-x-px text-[10px] sm:text-sm rounded-lg overflow-hidden\">\r\n              {/* Button go to start */}\r\n              <li>\r\n                <button\r\n                  onClick={() => setPage(1)}\r\n                  disabled={page === 1}\r\n                  className=\"btn-secondary text-muted-light dark:text-muted-dark bg-surface-light dark:bg-surface-dark border flex items-center justify-center px-2 sm:px-3 h-6 sm:h-8 leading-tight\"\r\n                  aria-label=\"Primera página\"\r\n                >\r\n                  <span className=\"sr-only\">Primera</span>\r\n                  <svg className=\"w-3 h-3 sm:w-4 sm:h-4\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" viewBox=\"0 0 24 24\">\r\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M15 19l-7-7 7-7\" />\r\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M19 19l-7-7 7-7\" />\r\n                  </svg>\r\n                </button>\r\n              </li>\r\n              {/* Button previous */}\r\n              <li>\r\n                <button\r\n                  onClick={() => setPage((p) => Math.max(1, p - 1))}\r\n                  disabled={page === 1}\r\n                  className=\"btn-secondary text-muted-light dark:text-muted-dark bg-surface-light dark:bg-surface-dark border flex items-center justify-center px-2 sm:px-3 h-6 sm:h-8 leading-tight\"\r\n                  aria-label=\"Anterior\"\r\n                >\r\n                  <span className=\"sr-only\">Anterior</span>\r\n                  <svg className=\"w-3 h-3 sm:w-4 sm:h-4\" aria-hidden=\"true\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\r\n                    <path\r\n                      fillRule=\"evenodd\"\r\n                      d=\"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z\"\r\n                      clipRule=\"evenodd\"\r\n                    ></path>\r\n                  </svg>\r\n                </button>\r\n              </li>\r\n              {/* Page buttons */}\r\n              {getPages().map((p, idx) => (\r\n                <li key={idx}>\r\n                  <button\r\n                    onClick={() => setPage(Number(p))}\r\n                    aria-current={page === p ? \"page\" : undefined}\r\n                    className={`btn-secondary flex items-center justify-center px-2 sm:px-3 h-6 sm:h-8 leading-tight border  \r\n                      ${\r\n                        page === p\r\n                          ? \"text-text-light bg-background-light dark:text-text-dark dark:bg-surface-dark border-primary font-semibold\"\r\n                          : \"text-muted-light dark:text-muted-dark bg-surface-light dark:bg-surface-dark\"\r\n                      }`}\r\n                  >\r\n                    {p}\r\n                  </button>\r\n                </li>\r\n              ))}\r\n              {/* Button following */}\r\n              <li>\r\n                <button\r\n                  onClick={() => setPage((p) => Math.min(totalPages, p + 1))}\r\n                  disabled={page === totalPages}\r\n                  className=\"btn-secondary text-muted-light dark:text-muted-dark bg-surface-light dark:bg-surface-dark border flex items-center justify-center px-2 sm:px-3 h-6 sm:h-8 leading-tight\"\r\n                  aria-label=\"Siguiente\"\r\n                >\r\n                  <span className=\"sr-only\">Siguiente</span>\r\n                  <svg className=\"w-3 h-3 sm:w-4 sm:h-4\" aria-hidden=\"true\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\r\n                    <path\r\n                      fillRule=\"evenodd\"\r\n                      d=\"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z\"\r\n                      clipRule=\"evenodd\"\r\n                    ></path>\r\n                  </svg>\r\n                </button>\r\n              </li>\r\n              {/* Button go to end */}\r\n              <li>\r\n                <button\r\n                  onClick={() => setPage(totalPages)}\r\n                  disabled={page === totalPages}\r\n                  className=\"btn-secondary text-muted-light dark:text-muted-dark bg-surface-light dark:bg-surface-dark border flex items-center justify-center px-2 sm:px-3 h-6 sm:h-8 leading-tight\"\r\n                  aria-label=\"Última página\"\r\n                >\r\n                  <span className=\"sr-only\">Última</span>\r\n                  <svg className=\"w-3 h-3 sm:w-4 sm:h-4\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" viewBox=\"0 0 24 24\">\r\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M9 5l7 7-7 7\" />\r\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M5 5l7 7-7 7\" />\r\n                  </svg>\r\n                </button>\r\n              </li>\r\n            </ul>\r\n            {/* Export button */}\r\n            <div className=\"relative ml-0 sm:ml-2\">\r\n              <button\r\n                className=\"btn-secondary text-muted-light dark:text-muted-dark bg-surface-light dark:bg-surface-dark border h-6 sm:h-8 w-10 sm:w-[42px] min-w-0 rounded-md flex items-center justify-center transition-colors\"\r\n                onClick={() => setShowExportMenu((v) => !v)}\r\n                aria-label=\"Exportar\"\r\n                type=\"button\"\r\n              >\r\n                <svg className=\"w-4 h-4 sm:w-5 sm:h-5\" fill=\"none\" viewBox=\"0 0 24 24\">\r\n                  <path\r\n                    stroke=\"currentColor\"\r\n                    strokeWidth={2}\r\n                    strokeLinecap=\"round\"\r\n                    strokeLinejoin=\"round\"\r\n                    d=\"M4 16v2a2 2 0 002 2h12a2 2 0 002-2v-2M7 10l5 5m0 0l5-5m-5 5V4\"\r\n                  />\r\n                </svg>\r\n              </button>\r\n              {showExportMenu && (\r\n                <div className=\"absolute right-0 mt-2 w-32 sm:w-36 bg-surface-light dark:bg-surface-dark border border-border-light dark:border-border-dark rounded shadow-lg z-10\">\r\n                  <button\r\n                    className=\"btn-secondary w-full text-left text-muted-light px-2 py-1 transition-colors text-[10px] sm:text-sm \"\r\n                    onClick={() => {\r\n                      handleExportExcel();\r\n                      setShowExportMenu(false);\r\n                    }}\r\n                  >\r\n                    Exportar a Excel\r\n                  </button>\r\n                  <button\r\n                    className=\"btn-secondary w-full text-left text-muted-light px-2 py-1 transition-colors text-[10px] sm:text-sm \"\r\n                    onClick={() => {\r\n                      handleExportPDF();\r\n                      setShowExportMenu(false);\r\n                    }}\r\n                  >\r\n                    Exportar a PDF\r\n                  </button>\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </nav>\r\n      </div>\r\n    </>\r\n  );\r\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 698, "column": 0}, "map": {"version":3,"sources":["file:///D:/perfi/frontend/app/components/form.tsx"],"sourcesContent":["import React from \"react\";\r\n\r\ntype Field = {\r\n  name: string;\r\n  label: string;\r\n  type: \"text\" | \"email\" | \"password\" | \"number\" | \"checkbox\";\r\n  placeholder?: string;\r\n  min?: number;\r\n  max?: number;\r\n  step?: string;\r\n  required?: boolean;\r\n};\r\n\r\ntype GenericFormProps = {\r\n  fields: Field[];\r\n  buttonText: string;\r\n  onSubmit?: (values: Record<string, any>) => void;\r\n  initialValues?: Record<string, any>; // Añadido\r\n};\r\n\r\nexport default function GenericForm(\r\n  { fields, buttonText, onSubmit, initialValues = {} }: GenericFormProps\r\n) {\r\n  const [values, setValues] = React.useState<Record<string, any>>(initialValues);\r\n\r\n  // Sincroniza valores si initialValues cambia (por ejemplo, al volver atrás)\r\n  React.useEffect(() => {\r\n    setValues(initialValues);\r\n  }, [initialValues]);\r\n\r\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const { name, type, checked, value } = e.target;\r\n    setValues((prev) => ({\r\n      ...prev,\r\n      [name]: type === \"checkbox\" ? checked : value,\r\n    }));\r\n  };\r\n\r\n  const handleSubmit = (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    if (onSubmit) onSubmit(values);\r\n  };\r\n\r\n  return (\r\n    <form className=\"py-2 max-w-sm mx-auto\" onSubmit={handleSubmit}>\r\n      {fields.map((field) => (\r\n        <div className=\"mb-5\" key={field.name}>\r\n          <label\r\n            htmlFor={field.name}\r\n            className=\"block mb-2 text-sm font-medium text-text-light dark:text-text-dark\"\r\n          >\r\n            {field.label}\r\n          </label>\r\n          {field.type === \"checkbox\" ? (\r\n            <div className=\"flex items-start\">\r\n              <input\r\n                id={field.name}\r\n                name={field.name}\r\n                type=\"checkbox\"\r\n                checked={!!values[field.name]}\r\n                onChange={handleChange}\r\n                className=\"w-4 h-4 border border-border-light rounded-sm bg-surface-light focus:ring-3 focus:ring-primary dark:bg-surface-dark dark:border-border-dark dark:focus:ring-primary dark:ring-offset-background-dark dark:focus:ring-offset-background-dark\"\r\n                required={field.required}\r\n              />\r\n              <label\r\n                htmlFor={field.name}\r\n                className=\"ms-2 text-sm font-medium text-text-light dark:text-text-dark\"\r\n              >\r\n                {field.label}\r\n              </label>\r\n            </div>\r\n          ) : (\r\n            <input\r\n              type={field.type}\r\n              id={field.name}\r\n              name={field.name}\r\n              value={values[field.name] || \"\"}\r\n              onChange={handleChange}\r\n              placeholder={field.placeholder}\r\n              required={field.required}\r\n              min={field.min}\r\n              max={field.max}\r\n              step={field.step}\r\n              className=\"shadow-xs bg-surface-light border border-border-light text-text-light text-sm rounded-lg focus:ring-primary focus:border-primary block w-full p-2.5 dark:bg-surface-dark dark:border-border-dark dark:placeholder-muted-dark dark:text-text-dark dark:focus:ring-primary dark:focus:border-primary\"\r\n            />\r\n          )}\r\n        </div>\r\n      ))}\r\n      <button\r\n        type=\"submit\"\r\n        className=\"btn w-full font-medium text-sm px-5 py-2.5 text-center\"\r\n      >\r\n        {buttonText}\r\n      </button>\r\n    </form>\r\n  );\r\n}"],"names":[],"mappings":";;;;AAAA;;;AAoBe,SAAS,YACtB,EAAE,MAAM,EAAE,UAAU,EAAE,QAAQ,EAAE,gBAAgB,CAAC,CAAC,EAAoB;IAEtE,MAAM,CAAC,QAAQ,UAAU,GAAG,qMAAA,CAAA,UAAK,CAAC,QAAQ,CAAsB;IAEhE,4EAA4E;IAC5E,qMAAA,CAAA,UAAK,CAAC,SAAS,CAAC;QACd,UAAU;IACZ,GAAG;QAAC;KAAc;IAElB,MAAM,eAAe,CAAC;QACpB,MAAM,EAAE,IAAI,EAAE,IAAI,EAAE,OAAO,EAAE,KAAK,EAAE,GAAG,EAAE,MAAM;QAC/C,UAAU,CAAC,OAAS,CAAC;gBACnB,GAAG,IAAI;gBACP,CAAC,KAAK,EAAE,SAAS,aAAa,UAAU;YAC1C,CAAC;IACH;IAEA,MAAM,eAAe,CAAC;QACpB,EAAE,cAAc;QAChB,IAAI,UAAU,SAAS;IACzB;IAEA,qBACE,8OAAC;QAAK,WAAU;QAAwB,UAAU;;YAC/C,OAAO,GAAG,CAAC,CAAC,sBACX,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BACC,SAAS,MAAM,IAAI;4BACnB,WAAU;sCAET,MAAM,KAAK;;;;;;wBAEb,MAAM,IAAI,KAAK,2BACd,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;oCACC,IAAI,MAAM,IAAI;oCACd,MAAM,MAAM,IAAI;oCAChB,MAAK;oCACL,SAAS,CAAC,CAAC,MAAM,CAAC,MAAM,IAAI,CAAC;oCAC7B,UAAU;oCACV,WAAU;oCACV,UAAU,MAAM,QAAQ;;;;;;8CAE1B,8OAAC;oCACC,SAAS,MAAM,IAAI;oCACnB,WAAU;8CAET,MAAM,KAAK;;;;;;;;;;;iDAIhB,8OAAC;4BACC,MAAM,MAAM,IAAI;4BAChB,IAAI,MAAM,IAAI;4BACd,MAAM,MAAM,IAAI;4BAChB,OAAO,MAAM,CAAC,MAAM,IAAI,CAAC,IAAI;4BAC7B,UAAU;4BACV,aAAa,MAAM,WAAW;4BAC9B,UAAU,MAAM,QAAQ;4BACxB,KAAK,MAAM,GAAG;4BACd,KAAK,MAAM,GAAG;4BACd,MAAM,MAAM,IAAI;4BAChB,WAAU;;;;;;;mBArCW,MAAM,IAAI;;;;;0BA0CvC,8OAAC;gBACC,MAAK;gBACL,WAAU;0BAET;;;;;;;;;;;;AAIT","debugId":null}},
    {"offset": {"line": 815, "column": 0}, "map": {"version":3,"sources":["file:///D:/perfi/frontend/app/amortization/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport \"../globals.css\";\r\nimport GenericTable from \"../components/table\";\r\nimport GenericForm from \"../components/form\";\r\nimport { useEffect, useState } from 'react';\r\n\r\n\r\nexport default function Amortization() {\r\n  const [showTable, setShowTable] = useState(false);\r\n  const [columns, setColumns] = useState([]);\r\n  const [data, setData] = useState([]);\r\n  const [formValues, setFormValues] = useState<any>(null); // Nuevo estado para los datos del form\r\n\r\n  // Restore stored data\r\n  useEffect(() => {\r\n    const savedColumns = localStorage.getItem(\"amortizationColumns\");\r\n    const savedData = localStorage.getItem(\"amortizationData\");\r\n    const savedShowTable = sessionStorage.getItem(\"amortizationShowTable\");\r\n    const savedForm = sessionStorage.getItem(\"amortizationFormValues\"); // Recupera el form\r\n\r\n    if (savedColumns && savedData) {\r\n      setColumns(JSON.parse(savedColumns));\r\n      setData(JSON.parse(savedData));\r\n      setShowTable(savedShowTable === \"true\");\r\n    }\r\n    if (savedForm) {\r\n      setFormValues(JSON.parse(savedForm));\r\n    }\r\n  }, []);\r\n\r\n  // Store data each time it changes\r\n  useEffect(() => {\r\n    if (columns.length && data.length) {\r\n      localStorage.setItem(\"amortizationColumns\", JSON.stringify(columns));\r\n      localStorage.setItem(\"amortizationData\", JSON.stringify(data));\r\n      sessionStorage.setItem(\"amortizationShowTable\", showTable ? \"true\" : \"false\");\r\n    }\r\n  }, [columns, data, showTable]);\r\n\r\n  // Guarda los datos del formulario\r\n  const handleSubmit = async (formData: any) => {\r\n    try {\r\n      setFormValues(formData);\r\n      sessionStorage.setItem(\"amortizationFormValues\", JSON.stringify(formData)); // Guarda el form\r\n      const response = await fetch(\"http://localhost:4000/api/amortization\", {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify(formData),\r\n      });\r\n      \r\n      if (!response.ok) throw new Error(\"Failed to fetch amortization table\");\r\n\r\n      const result = await response.json();\r\n      setColumns(result.columns);\r\n      setData(result.data);\r\n      setShowTable(true);\r\n    } catch (err) {\r\n      console.error(err);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <section className=\"space-y-12 px-4 max-w-5xl mx-auto\">\r\n      {!showTable && (\r\n        <div className=\"text-center\">\r\n          <h1 className=\"text-4xl font-bold text-primary dark:text-primary-dark\">\r\n            Tabla de amortización de préstamos\r\n          </h1>\r\n          <p className=\"text-muted-light dark:text-muted-dark text-lg mt-2\">\r\n            Introduce los datos de tu préstamo y obtén una tabla detallada de pagos mensuales.\r\n          </p>\r\n        </div>\r\n      )}\r\n      {showTable ? (\r\n        <div className=\"space-y-3\">\r\n          <a\r\n            href=\"#\"\r\n            className=\"inline-flex items-center gap-1 text-light hover:underline text-base font-medium transition-colors\"\r\n            onClick={e => {\r\n              e.preventDefault();\r\n              setShowTable(false);\r\n            }}\r\n          >\r\n            <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" strokeWidth={2} viewBox=\"0 0 24 24\">\r\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M15 19l-7-7 7-7\" />\r\n            </svg>\r\n            Volver\r\n          </a>\r\n          <GenericTable \r\n          columns={columns}\r\n          data={data}\r\n        />\r\n        </div>\r\n        \r\n      ) : (\r\n        <div className=\"flex flex-col gap-6 md:flex-row md:justify-center\">\r\n          <div className=\"py-3 px-2 max-w-sm md:max-w-md lg:max-w-lg xl:max-w-2xl w-full md:w-1/2 mx-auto md:[text-wrap:balance]\">\r\n            <h2 className=\"text-xl font-semibold mb-4 text-center md:text-left\">Cómo funciona</h2>\r\n            <ul className=\"list-disc pl-5 text-sm xl:text-base text-muted-light dark:text-muted-dark space-y-4\">\r\n              <li>Introduce la cantidad, el interés anual y el tiempo restante.</li>\r\n              <li>Se utiliza el sistema de amortización francés, en el que las cuotas son constantes, pero la proporción entre capital e intereses varía en el tiempo.</li>\r\n              <li>Al inicio pagarás más intereses y menos capital; con el tiempo, el capital amortizado será mayor.</li>\r\n              <li>Obtendrás una tabla detallada con el desglose de cada cuota .</li>\r\n            </ul>\r\n          </div>\r\n          <div className=\"card max-w-sm md:max-w-md lg:max-w-lg xl:max-w-2xl w-full md:w-1/2 mx-auto\">\r\n            <GenericForm \r\n              fields={[\r\n                { name: 'loanAmount', label: 'Cantidad', type: 'number', placeholder: '10000', min: 0, required: true },\r\n                { name: 'interestRate', label: 'Interés anual (%)', type: 'number', placeholder: '2,5', min: 0, step: '0.01', required: true },\r\n                { name: 'loanTerm', label: 'Plazo (meses)', type: 'number', placeholder: '360', min: 0, max: 480, required: true },\r\n              ]}\r\n              onSubmit={handleSubmit}\r\n              buttonText=\"Calcular tabla de amortización\"\r\n              initialValues={formValues || {}}\r\n            />\r\n          </div>\r\n        </div>\r\n      )}\r\n    </section>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}